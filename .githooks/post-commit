#!/usr/bin/env bash
set -u

SKILLSYNC_CMD="/Users/yedi/yedi-study/yedi-skills/scripts/skillsync"

if [ ! -f "$SKILLSYNC_CMD" ]; then
  echo "[skill-sync] ERROR: skillsync command not found: $SKILLSYNC_CMD" >&2
  exit 0
fi

"$SKILLSYNC_CMD" sync all --commit HEAD
status=$?

if [ "$status" -ne 0 ]; then
  echo "[skill-sync] ERROR: post-commit sync failed (exit ${status}). Commit has been kept." >&2
  exit 0
fi

echo "[skill-sync] post-commit sync finished."
exit 0
